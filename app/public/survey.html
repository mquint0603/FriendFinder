<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <title>Document</title>
</head>
<body>
    <div class="container">
        <br>
        <br>

        <div class="row">
            <div class="col-md-8">
                <h2>Survey Questions</h2>
                <hr>
                <form action="">
                    <h3>About You</h3>
                    <div class="form-group">
                            <!-- <label for="usr">Name:</label> -->
                            <h4> Name (Required)</h4>
                            <input type="text" class="form-control" id="name">
                    </div>
    
                    <div class="form-group">
                            <!-- <label for="usr">Name:</label> -->
                            <h4>Link to image (Required)</h4>
                            <input type="text" class="form-control" id="image">
                    </div>
                    <!-- <br> -->
                    <hr>
                    <!-- <br> -->
                    <div class="form-group">
                        <h3>Question 1</h3>
                        <h4>Your cat </h4>
                        <!-- <label for="sel1">Select list:</label> -->
                        <select class="form-control" id="q1">
                            <option value="" selected disabled>Please select an option</option>
                            <option value="1"> 1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
    
                    <div class="form-group">
                        <h3>Question 2</h3>
                        <!-- <label for="sel1">Select list:</label> -->
                        <select class="form-control" id="q2">
                            <option value="" selected disabled>Please select an option</option>
                            <option value="1"> 1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <h3>Question 3</h3>
                        <!-- <label for="sel1">Select list:</label> -->
                        <select class="form-control" id="q3">
                            <option value="" selected disabled>Please select an option</option>
                            <option value="1"> 1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                   
    
                    <button type="submit" class="submit btn btn-info btn-lg">Submit</button>
                </form>
                <hr>
                <a href="/api/friends">API Friends List</a>
            </div>

        </div>
    </div>



    <div class="modal fade" id="matchModal" tabindex="-1" role="dialog" aria-labelledby="largeModal" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h1 class="modal-title" id="myModalLabel">Best Match</h1>
            </div>
            <div class="modal-body">
              <h2 id="matchName"></h2>
              <img id="matchImg" src="" alt="">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
            </div>
          </div>
        </div>
      </div>
</body>
<script type="text/javascript">

    // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
    // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
    // Our api recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js).
    // In this case the associated code "saves" the data to the table-data.js file or waitinglist-data.js file

    $(".submit").on("click", function(event) {
      event.preventDefault();

      // Here we grab the form elements
      var newFriend = {
        name: $("#name").val().trim(),
        image: $("#image").val().trim(),
        scores: [
            $("#q1").val(),
            $("#q2").val(),
            $("#q3").val(),
            $("#q4").val(),
            $("#q5").val(),
            $("#q6").val(),
            $("#q7").val(),
            $("#q8").val(),
            $("#q9").val(),
            $("#q10").val()
        ]
      };



      $.post("/api/friends", newFriend,
        function(data) {

          // If a table is available... tell user they are booked.
          if (data) {
            // alert("Functionality coming soon!");
            console.log(data)
            $("#matchName").text(data.name)
            $("#matchImg").attr("src", data.image)
            $("#matchModal").modal("toggle");

          }

          // If a table is available... tell user they on the waiting list.
          else {
            alert("Error");
          }

          // Clear the form when submitting
          $("#name").val("");
          $("#image").val("");
        });

    });

</script>
</html>